function BillController(e,l,i,t,n){var s=this;s.shellID=l.shellID,s.billList=[],s.filteredList=[],s.currentPage=1,s.numPerPage=10,s.maxsize=s.billList.length/10,s.billMessage="",s.getRandomColor=function(e,l){var i=["#3175b0","#58b358","#52bcdc","#efa741","#d24844"],t="";return e.color?e.color:(t+=i[l%i.length],e.color=t,t)},s.toggleModal=function(e,l,t){i.buttonClicked=e,i.showModal=!i.showModal,s.btnClicked=e,"Add Bill"==e?(s.createDate=new Date,s.billType="Rent",s.billMessage="",s.itemAmount="",s.description="",s.comments="",s.CreateEdit="Create"):(s.index=t,s.billID=l._id,s.createDate=new Date(l.date),s.billType=l.billType,s.billMessage="",s.itemAmount=l.itemAmount,s.description=l.description,s.comments=l.comments,s.CreateEdit="update")},s.billModify=function(){var l={};l.billShell_id=s.shellID,l.person="priya.suriyamurthi@gmail.com",l.itemAmount=s.itemAmount,l.billType=s.billType,l.description=s.description,l.comments=s.comments,l.date=s.createDate,"Add Bill"==s.btnClicked?(e.create(l).then(function(e){s.billList.push(e),s.billMessage="New Bill was added",s.listFilter()}),s.billMessage=""):e.update(l,s.billID).then(function(e){for(var i=Object.keys(s.billList[s.index]),t=0;t<i.length;t++)l.hasOwnProperty([i[t]])&&(s.billList[s.index][i[t]]=l[i[t]]);s.billMessage="Bill was updated",s.listFilter()}),s.billCreate.$setPristine(),s.billCreate.$setUntouched(),s.billCreate.$submitted=!1},s.deleteBill=function(l,i){e.remove(l.billShell_id,l._id).then(function(e){s.billMessage="Bill was removed",s.billList.splice(i,1),s.listFilter()})},s.fetchBills=function(){s.billList.length=0,e.retrieve(this.shellID).then(function(e){s.billList=e,s.listFilter()})},s.listFilter=function(){s.filteredList.length=0,i.$watch("currentPage + numPerPage",function(){var e=(s.currentPage-1)*s.numPerPage,l=e+s.numPerPage;s.filteredList=s.billList.slice(e,l)})},s.fetchBills()}function BillController(BillService,$stateParams,$scope,$state,$filter){var ctrl=this;ctrl.shellID=$stateParams.shellID,ctrl.billList=[],ctrl.filteredList=[],ctrl.currentPage=1,ctrl.numPerPage=10,ctrl.maxsize=ctrl.billList.length/10,ctrl.billMessage="",ctrl.getRandomColor=function(item,index){var colors=["#3175b0","#58b358","#52bcdc","#efa741","#d24844"],color="";return item.color?item.color:(color+=colors[index%colors.length],item.color=color,color)},ctrl.toggleModal=function(btnClicked,bill,index){$scope.buttonClicked=btnClicked,$scope.showModal=!$scope.showModal,ctrl.btnClicked=btnClicked,"Add Bill"==btnClicked?(ctrl.createDate=new Date,ctrl.billType="Rent",ctrl.billMessage="",ctrl.itemAmount="",ctrl.description="",ctrl.comments="",ctrl.CreateEdit="Create"):(ctrl.index=index,ctrl.billID=bill._id,ctrl.createDate=new Date(bill.date),ctrl.billType=bill.billType,ctrl.billMessage="",ctrl.itemAmount=bill.itemAmount,ctrl.description=bill.description,ctrl.comments=bill.comments,ctrl.CreateEdit="update")},ctrl.billModify=function(){var newBill={};newBill.billShell_id=ctrl.shellID,newBill.person="priya.suriyamurthi@gmail.com",newBill.itemAmount=ctrl.itemAmount,newBill.billType=ctrl.billType,newBill.description=ctrl.description,newBill.comments=ctrl.comments,newBill.date=ctrl.createDate,"Add Bill"==ctrl.btnClicked?(BillService.create(newBill).then(function(response){ctrl.billList.push(response),ctrl.billMessage="New Bill was added",ctrl.listFilter()}),ctrl.billMessage=""):BillService.update(newBill,ctrl.billID).then(function(response){for(var key=Object.keys(ctrl.billList[ctrl.index]),i=0;i<key.length;i++)newBill.hasOwnProperty([key[i]])&&(ctrl.billList[ctrl.index][key[i]]=newBill[key[i]]);ctrl.billMessage="Bill was updated",ctrl.listFilter()}),ctrl.billCreate.$setPristine(),ctrl.billCreate.$setUntouched(),ctrl.billCreate.$submitted=!1},ctrl.deleteBill=function(bill,index){BillService.remove(bill.billShell_id,bill._id).then(function(response){ctrl.billMessage="Bill was removed",ctrl.billList.splice(index,1),ctrl.listFilter()})},ctrl.fetchBills=function(){ctrl.billList.length=0,BillService.retrieve(this.shellID).then(function(response){ctrl.billList=response,ctrl.listFilter()})},ctrl.listFilter=function(){ctrl.filteredList.length=0,$scope.$watch("currentPage + numPerPage",function(){var begin=(ctrl.currentPage-1)*ctrl.numPerPage,end=begin+ctrl.numPerPage;ctrl.filteredList=ctrl.billList.slice(begin,end)})},ctrl.fetchBills()}function BillService(e){var t="http://lowcost-env.tbm3pbiki7.us-east-1.elasticbeanstalk.com/api/billshell/";return{retrieve:function(n){return e.get(t+n+"/bills").then(function(e){return e.data})},create:function(n){return e.post(t+n.billShell_id+"/bills",n).then(function(e){return e.data})},update:function(n,l){return e.put(t+n.billShell_id+"/bills/"+l,n).then(function(e){return e.data})},remove:function(n,l){return e.delete(t+n+"/bills/"+l).then(function(e){return e.data})}}}function BillService($http){var API="http://lowcost-env.tbm3pbiki7.us-east-1.elasticbeanstalk.com/api/billshell/";return{retrieve:function(shellID){return $http.get(API+shellID+"/bills").then(function(response){return response.data})},create:function(bill){return $http.post(API+bill.billShell_id+"/bills",bill).then(function(response){return response.data})},update:function(bill,billID){return $http.put(API+bill.billShell_id+"/bills/"+billID,bill).then(function(response){return response.data})},remove:function(billShell_id,billID){return $http.delete(API+billShell_id+"/bills/"+billID).then(function(response){return response.data})}}}function billShellView(l,e){var t=this;e.showModal=!1,e.buttonClicked="",t.billShell=[],t.shellMessage="",this.getBillShell=function(){l.retrieve().then(function(l){t.billShell=l})},this.getRandomColor=function(l,e){var t=["#3175b0","#58b358","#52bcdc","#efa741","#d24844"],i="";return l.color?l.color:(i+=t[e%t.length],l.color=i,i)},e.toggleModal=function(l,t,i){e.buttonClicked=l,e.shell=t,e.index=i,e.showModal=!e.showModal},this.deleteShell=function(e,i){l.deleteshell(e).then(function(l){t.shellMessage="Shell deleted Successfully!!!",t.billShell.splice(i,1)},function(l){t.shellMessage="Error deleting the shell"}),t.shellMessage=""},this.shellSubmit=function(){var i={login_id:"58b4bb8b428f652285bb62b4",owner:"priya.suriyamurthi@gmail.com"};i.sheetName=this.shellNew,l.create(i).then(function(l){t.billShell.push(l),t.shellNew="",e.shellCreate.$setPristine(),e.shellCreate.$setUntouched(),e.shellCreate.$submitted=!1})},this.getBillShell()}function billShellView(BillShellService,$scope){var ctrl=this;$scope.showModal=!1,$scope.buttonClicked="",ctrl.billShell=[],ctrl.shellMessage="",this.getBillShell=function(){BillShellService.retrieve().then(function(response){ctrl.billShell=response})},this.getRandomColor=function(item,index){var colors=["#3175b0","#58b358","#52bcdc","#efa741","#d24844"],color="";return item.color?item.color:(color+=colors[index%colors.length],item.color=color,color)},$scope.toggleModal=function(btnClicked,shell,index){$scope.buttonClicked=btnClicked,$scope.shell=shell,$scope.index=index,$scope.showModal=!$scope.showModal},this.deleteShell=function(shell,index){BillShellService.deleteshell(shell).then(function(response){ctrl.shellMessage="Shell deleted Successfully!!!",ctrl.billShell.splice(index,1)},function(error){ctrl.shellMessage="Error deleting the shell"}),ctrl.shellMessage=""},this.shellSubmit=function(){var createDetails={login_id:"58b4bb8b428f652285bb62b4",owner:"priya.suriyamurthi@gmail.com"};createDetails.sheetName=this.shellNew,BillShellService.create(createDetails).then(function(response){ctrl.billShell.push(response),ctrl.shellNew="",$scope.shellCreate.$setPristine(),$scope.shellCreate.$setUntouched(),$scope.shellCreate.$submitted=!1})},this.getBillShell()}function BillShellService(e){var t="http://lowcost-env.tbm3pbiki7.us-east-1.elasticbeanstalk.com/api/billshell";return{retrieve:function(){return e.get(t).then(function(e){return e.data})},create:function(n){return e.post(t,n).then(function(e){return e.data})},deleteshell:function(n){return e.delete(t+"/"+n).then(function(e){return e.data})}}}function BillShellService($http){var API="http://lowcost-env.tbm3pbiki7.us-east-1.elasticbeanstalk.com/api/billshell";return{retrieve:function(){return $http.get(API).then(function(response){return response.data})},create:function(shell){return $http.post(API,shell).then(function(response){return response.data})},deleteshell:function(shellID){return $http.delete(API+"/"+shellID).then(function(response){return response.data})}}}function infoMessage(){return{restrict:"E",scope:{message:"="},template:'<divclass="alert alert-info alert-dismissable fade in" class="alertMessage"><strong>Info!</strong> {{message}}<button type="button" class="btn" class="close" id="btn-alert" data-dismiss="alert">×</button></div>'}}function infoMessage(){return{restrict:"E",scope:{message:"="},template:'<divclass="alert alert-info alert-dismissable fade in" class="alertMessage"><strong>Info!</strong> {{message}}<button type="button" class="btn" class="close" id="btn-alert" data-dismiss="alert">×</button></div>'}}function modal(){return{template:'<div class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">{{ buttonClicked }} !!</h4></div><div class="modal-body" ng-transclude></div></div></div></div>',restrict:"E",transclude:!0,replace:!0,scope:!0,link:function(a,d,i){a.$watch(i.visible,function(a){a===!0?$(d).modal("show"):$(d).modal("hide")}),$(d).on("shown.bs.modal",function(){a.$apply(function(){a.$parent[i.visible]=!0})}),$(d).on("hidden.bs.modal",function(){a.$apply(function(){a.$parent[i.visible]=!1})})}}}function modal(){return{template:'<div class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">{{ buttonClicked }} !!</h4></div><div class="modal-body" ng-transclude></div></div></div></div>',restrict:"E",transclude:!0,replace:!0,scope:!0,link:function($scope,$element,$attrs){$scope.$watch($attrs.visible,function(value){value===!0?$($element).modal("show"):$($element).modal("hide")}),$($element).on("shown.bs.modal",function(){$scope.$apply(function(){$scope.$parent[$attrs.visible]=!0})}),$($element).on("hidden.bs.modal",function(){$scope.$apply(function(){$scope.$parent[$attrs.visible]=!1})})}}}function mainController(l){this.billHeader=["billType","description","itemAmount","date","action"],this.shellID=l.shellID}function mainController($stateParams){this.billHeader=["billType","description","itemAmount","date","action"],this.shellID=$stateParams.shellID}angular.module("bilancio").controller("BillController",BillController),angular.module("bilancio").controller("BillController",BillController),angular.module("bilancio").service("BillService",BillService),angular.module("bilancio").service("BillService",BillService),angular.module("bilancio").controller("BillShellController",billShellView),angular.module("bilancio").controller("BillShellController",billShellView),angular.module("bilancio").service("BillShellService",BillShellService),angular.module("bilancio").service("BillShellService",BillShellService),angular.module("bilancio").config(function(l,e){l.state("dashboard",{url:"/dashboard",templateUrl:"index.html"}).state("billView",{url:"/billView",params:{shellID:"65756"},controller:"MainController as main",templateUrl:"view/billView.html"}).state("billshellList",{url:"/billShell",controller:"",templateUrl:"view/billShellView.html"}),e.otherwise("/dashboard")}),angular.module("bilancio").config(function($stateProvider,$urlRouterProvider){$stateProvider.state("dashboard",{url:"/dashboard",templateUrl:"index.html"}).state("billView",{url:"/billView",params:{shellID:"65756"},controller:"MainController as main",templateUrl:"view/billView.html"}).state("billshellList",{url:"/billShell",controller:"",templateUrl:"view/billShellView.html"}),$urlRouterProvider.otherwise("/dashboard")}),angular.module("bilancio").directive("infoMessage",infoMessage),angular.module("bilancio").directive("infoMessage",infoMessage),angular.module("bilancio").directive("modal",modal),angular.module("bilancio").directive("modal",modal),angular.module("bilancio").controller("MainController",mainController),angular.module("bilancio").controller("MainController",mainController);